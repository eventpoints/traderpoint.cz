<nav class="navbar navbar-expand-lg glass rounded-0 border-0" data-bs-theme="light">
    <div class="container d-flex gap-3 justify-content-between align-items-center flex-row">
        <a class="navbar-brand" href="{{ path('landing') }}">
            <div class="d-flex justify-content-start align-items-center gap-2">
                <img height="60" src="{{ asset('images/tp-logo.png') }}">
                <div class="fs-4 border-start border-3 ps-2">
                    <div class="lh-1">Trader</div>
                    <div class="lh-1">Point</div>
                </div>
            </div>
        </a>
        <ul class="navbar-nav align-items-center flex-row gap-3">
            {% if app.user %}
                <li class="nav-item">
                    <a class="nav-link fw-bold" type="button" data-bs-toggle="offcanvas"
                       data-bs-target="#user-menu-offcanvas" aria-controls="user-menu-offcanvas"
                       aria-label="Toggle navigation">
                        {{ ux_icon('mdi:user-circle-outline', {style: 'height: 2em;'}) }}
                    </a>
                </li>
            {% else %}
                {% if app.current_route == 'trader_register' %}
                    <li class="nav-item">
                        <a class="btn btn-outline-secondary fw-bold text-primary" href="{{ path('landing') }}"
                           type="button">
                            {{ 'looking-to-hire'|trans }}
                        </a>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="btn btn-outline-primary fw-bold text-black" href="{{ path('trader_register') }}"
                           type="button">
                            {{ 'tradesmen-register'|trans }}
                        </a>
                    </li>
                {% endif %}
            {% endif %}
            <li class="nav-item">
                <a class="nav-link" type="button" data-bs-toggle="offcanvas"
                   data-bs-target="#language-menu-offcanvas" aria-controls="language-menu-offcanvas"
                   aria-label="Language menu">
                    {{ ux_icon('mdi:web', {style: 'height: 2em;'}) }}
                </a>
            </li>
        </ul>
    </div>
</nav>

{% if app.user %}
    <div class="offcanvas offcanvas-end" tabindex="-1" id="user-menu-offcanvas"
         aria-labelledby="user-menu-offcanvas-label">
        <div class="offcanvas-header d-flex flex-column">
            <div class="text-end w-100">
                <a data-bs-dismiss="offcanvas" type="button">
                    {{ ux_icon('mdi:window-close', {style: 'height: 2em;'}) }}
                </a>
            </div>
            {% if app.user and app.user.isTrader %}
                <div class="mb-4">
                    <img
                            class="p-0"
                            alt="Membership QR"
                            src="{{ membership_qr_data_uri(partnerSlug = null, size = 250) }}"
                    />
                </div>
            {% endif %}
            <div class="w-100 d-flex gap-3 justify-content-start align-items-start">
                <div>
                    <img class="avatar-80 border border-3c" src="{{ app.user.avatar }}"/>
                </div>
                <div>
                    <h5 class="offcanvas-title fs-4" id="offcanvasNavbarLabel">{{ app.user.FullName }}</h5>
                    <div class="text-muted">{{ app.user.email }}</div>
                </div>
            </div>
        </div>
        <div class="list-group list-group-flush fs-5">
            {% if app.user.isTrader %}
                <a class="list-group-item list-group-item-action {{ app.locale == 'trader_dashboard' ? 'active' }}"
                   href="{{ path('trader_dashboard') }}">{{ 'dashboard'|trans|title }}</a>
            {% else %}
                <a class="list-group-item list-group-item-action {{ app.locale == 'client_dashboard' ? 'active' }}"
                   href="{{ path('client_dashboard') }}">{{ 'dashboard'|trans|title }}</a>
            {% endif %}
            <a class="list-group-item list-group-item-action {{ app.locale == 'user_conversations' ? 'active' }}"
               href="{{ path('user_conversations') }}">{{ 'messages'|trans|title }}</a>
            {% if app.user.isTrader %}
                <a class="list-group-item list-group-item-action {{ app.locale == 'trader_account' ? 'active' }}"
                   href="{{ path('trader_account') }}">{{ 'account'|trans|title }}</a>
            {% else %}
                <a class="list-group-item list-group-item-action {{ app.locale == 'user_account' ? 'active' }}"
                   href="{{ path('user_account') }}">{{ 'account'|trans|title }}</a>
            {% endif %}
            <a class="list-group-item text-danger list-group-item-action"
               href="{{ path('app_logout') }}">{{ 'logout'|trans|title }}</a>
        </div>
    </div>
{% endif %}

<div class="offcanvas offcanvas-end" tabindex="-1" id="language-menu-offcanvas"
     aria-labelledby="language-menu-offcanvas-label">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title fs-4" id="offcanvasNavbarLabel">{{ 'language'|trans|title }}</h5>
        <div class="text-end w-100">
            <a data-bs-dismiss="offcanvas" type="button">
                {{ ux_icon('mdi:window-close', {style: 'height: 2em;'}) }}
            </a>
        </div>
    </div>
    <div class="list-group list-group-flush fs-5">
        <a class="list-group-item list-group-item-action {{ app.locale == 'cs' ? 'active' }}"
           href="{{ path('landing', {_locale: 'cs'}) }}">{{ 'cs'|locale_name|title }}</a>
        <a class="list-group-item list-group-item-action {{ app.locale == 'en' ? 'active' }}"
           href="{{ path('landing', {_locale: 'en'}) }}">{{ 'en'|locale_name|title }}</a>
        <a class="list-group-item list-group-item-action {{ app.locale == 'uk' ? 'active' }}"
           href="{{ path('landing', {_locale: 'uk'}) }}">{{ 'uk'|locale_name|title }}</a>
        <a class="list-group-item list-group-item-action {{ app.locale == 'ru' ? 'active' }}"
           href="{{ path('landing', {_locale: 'ru'}) }}">{{ 'ru'|locale_name|title }}</a>
    </div>
</div>